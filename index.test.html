<!doctype html><meta charset="utf-8">
<h1 id="h">Results</h1><div class="cards"></div>
<script>
(async () => {
  const apiBase = 'http://127.0.0.1:8000';
  const p = new URLSearchParams(location.search);
  const text = p.get('text') || 'i like mountains';
  const k = Number(p.get('k') || '6');
  document.getElementById('h').textContent = 'Loading...';
  try {
    const r = await fetch(`${apiBase}/api/v1/recommend`, {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ user_text: text, top_k: k })
    });
    const data = await r.json();
    document.getElementById('h').textContent = `${(data.results||[]).length} results`;
    document.querySelector('.cards').textContent = JSON.stringify(data, null, 2);
  } catch (e) {
    document.getElementById('h').textContent = 'Error';
    document.querySelector('.cards').textContent = String(e);
  }
})();
</script>
